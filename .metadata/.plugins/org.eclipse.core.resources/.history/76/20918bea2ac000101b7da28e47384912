package dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Timestamp;
import java.util.ArrayList;

import dto.UserDTO;
import util.JDBCUtil;

public class UserDAO {
	Connection con = null;
	ResultSet rs = null;
	PreparedStatement pstmt = null;
	
	public void updateUser(UserDTO dto) {
		con = JDBCUtil.jdbcCon();
		
		ArrayList<Object> params = new ArrayList<Object>();
		
		int autoId = dto.getAutoId();
		String userId = dto.getUserId();
		String userPassword = dto.getUserPassword();
		String userName = dto.getUserName();
		String nickname = dto.getNickname();
		int trustScore = dto.getTrustScore();
		int addressId = dto.getAddressId();
		String addressDetail = dto.getAddressDetail();
		Timestamp updatedAt = dto.getUpdatedAt();
		
		String sql = "Update user Set";
		
		if(dto.getUserId() != null) {
			sql += " user_id = ?,";
			params.add(dto.getUserId());
		}
		if(dto.getUserPassword() != null) {
			sql += " userPassword = ?,";
			params.add(dto.getUserPassword());
		}
		if(dto.getNickname() != null) {
			sql += " nickname = ?,";
			params.add(dto.getNickname());
		}
		if(dto.getTrustScore() != 0) {
			sql += " trust_score = ?,";
			params.add(dto.getTrustScore());
		}
		if (dto.getAddressId() != 0) {
		    sql += " address_id = ?, ";
		    params.add(dto.getAddressId());
		}
		if (dto.getAddressDetail() != null) {
		    sql += "address_detail = ?, ";
		    params.add(dto.getAddressDetail());
		}
		
		if (sql.endsWith(", ")) {
		    sql = sql.substring(0, sql.length() - 2);
		}
		
		pstmt = con.prepareStatement(sql);
		

	}
}
